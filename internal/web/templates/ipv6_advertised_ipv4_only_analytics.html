{{template "base" .}}

{{define "title"}}IPv6 Advertised, IPv4 Only{{end}}

{{define "page_title"}}IPv6 Advertised, IPv4 Only{{end}}

{{define "page_subtitle"}}<p class="subtitle">Nodes advertising IPv6 capability but only accessible via IPv4</p>{{end}}

{{define "head_scripts"}}
<script src="/static/tooltip.js"></script>
<script src="/static/sortable-table.js"></script>
{{end}}

{{define "content"}}
{{template "analytics_filters" .}}
{{template "error_display" .}}

{{if .IPv6Nodes}}
<div class="stats-box">
    <h3>Found {{len .IPv6Nodes}} IPv6 Advertised, IPv4 Only Nodes</h3>
</div>

<div class="table-responsive">
    <table class="data-table sortable-table">
        <thead>
            <tr>
                <th data-sortable data-type="address">Node Address</th>
                <th data-sortable data-type="string">Hostname</th>
                <th data-sortable data-type="string">Working IPv4 Protocols</th>
                <th data-sortable data-type="string">Failed IPv6 Protocols</th>
                <th data-sortable data-type="string">Location</th>
                <th data-sortable data-type="date">Last Tested</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {{range .IPv6Nodes}}
            <tr>
                {{template "node_address_cell" .}}
                {{template "hostname_cell" .}}
                <td>
                    {{if .BinkPIPv4Tested}}
                        {{if .BinkPIPv4Success}}
                            <span class="badge badge-success">BinkP</span>
                        {{end}}
                    {{end}}
                    {{if .IfcicoIPv4Tested}}
                        {{if .IfcicoIPv4Success}}
                            <span class="badge badge-success">IFCICO</span>
                        {{end}}
                    {{end}}
                    {{if .TelnetIPv4Tested}}
                        {{if .TelnetIPv4Success}}
                            <span class="badge badge-success">Telnet</span>
                        {{end}}
                    {{end}}
                    {{if and (not .BinkPIPv4Tested) (not .IfcicoIPv4Tested) (not .TelnetIPv4Tested)}}
                        <span class="text-muted" title="IPv4 was not tested in this specific result, but was tested and succeeded during the reporting period">Not tested in latest result</span>
                    {{else if and (not .BinkPIPv4Success) (not .IfcicoIPv4Success) (not .TelnetIPv4Success)}}
                        <span class="text-muted">None working</span>
                    {{end}}
                </td>
                <td>
                    {{if .BinkPIPv6Tested}}
                        {{if not .BinkPIPv6Success}}
                            <span class="badge badge-danger" title="{{.BinkPIPv6Error}}">BinkP</span>
                        {{end}}
                    {{end}}
                    {{if .IfcicoIPv6Tested}}
                        {{if not .IfcicoIPv6Success}}
                            <span class="badge badge-danger" title="{{.IfcicoIPv6Error}}">IFCICO</span>
                        {{end}}
                    {{end}}
                    {{if .TelnetIPv6Tested}}
                        {{if not .TelnetIPv6Success}}
                            <span class="badge badge-danger" title="{{.TelnetIPv6Error}}">Telnet</span>
                        {{end}}
                    {{end}}
                    {{if and (not .BinkPIPv6Tested) (not .IfcicoIPv6Tested) (not .TelnetIPv6Tested)}}
                        <span class="text-muted" title="IPv6 was not tested in this specific result, but was tested and failed during the reporting period">Not tested in latest result</span>
                    {{end}}
                </td>
                {{template "location_cell" .}}
                {{template "timestamp_cell" .}}
                {{template "action_buttons_cell" .}}
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<div class="info-box" style="margin-top: 2rem;">
    <p><strong>Note:</strong> This report shows nodes that advertise IPv6 capability (either in the nodelist or via DNS resolution) but are currently only accessible via IPv4 over the last {{.Days}} days. These nodes have working IPv4 services (BinkP, IFCICO, or Telnet) but all IPv6 services are non-functional. This may indicate IPv6 misconfiguration, firewall issues, or incomplete IPv6 deployment.</p>
</div>
{{else}}
<div class="alert alert-warning">
    <strong>No IPv6-advertised IPv4-only nodes found for the selected period.</strong><br>
    This could mean that all nodes with IPv6 addresses have at least one working IPv6 service, or no nodes meet the criteria of having working IPv4 but failing IPv6 during this period.
</div>
{{end}}
{{end}}
