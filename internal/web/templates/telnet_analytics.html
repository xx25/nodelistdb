<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telnet Enabled Nodes - NodelistDB</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .compact-actions {
            display: flex;
            gap: 0.25rem;
        }

        .compact-actions a {
            padding: 0.125rem 0.25rem;
            font-size: 0.875rem;
        }

        .protocol-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .protocol-info h3 {
            margin-top: 0;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Telnet Enabled Nodes</h1>
            <p class="subtitle">Nodes that have been successfully tested with Telnet BBS protocol</p>
        </header>

        {{template "nav" .}}

        <div class="content">
            <div class="search-container">
                <form method="get" action="/analytics/telnet" style="display: flex; gap: 1rem; align-items: center; margin-bottom: 2rem;">
                    <div class="form-group">
                        <label for="days">Period:</label>
                        <select name="days" id="days" class="form-control">
                            <option value="7" {{if eq .Days 7}}selected{{end}}>Last 7 days</option>
                            <option value="30" {{if eq .Days 30}}selected{{end}}>Last 30 days</option>
                            <option value="90" {{if eq .Days 90}}selected{{end}}>Last 90 days</option>
                            <option value="180" {{if eq .Days 180}}selected{{end}}>Last 180 days</option>
                            <option value="365" {{if eq .Days 365}}selected{{end}}>Last year</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="limit">Limit:</label>
                        <select name="limit" id="limit" class="form-control">
                            <option value="50" {{if eq .Limit 50}}selected{{end}}>50</option>
                            <option value="100" {{if eq .Limit 100}}selected{{end}}>100</option>
                            <option value="200" {{if eq .Limit 200}}selected{{end}}>200</option>
                            <option value="500" {{if eq .Limit 500}}selected{{end}}>500</option>
                            <option value="1000" {{if eq .Limit 1000}}selected{{end}}>1000</option>
                        </select>
                    </div>

                    <div class="form-group" style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" name="includeZero" id="includeZero" value="true" {{if .IncludeZeroNodes}}checked{{end}}>
                        <label for="includeZero" style="margin: 0;">Include /0 nodes</label>
                    </div>

                    <button type="submit" class="btn btn-primary">Apply Filters</button>
                </form>
            </div>

            {{if .Error}}
            <div class="alert alert-error">
                <strong>Error:</strong> {{.Error}}
            </div>
            {{end}}

            {{if .ProtocolNodes}}
            <div class="stats-box">
                <h3>Found {{len .ProtocolNodes}} Telnet Enabled Nodes</h3>
            </div>

            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Node Address</th>
                            <th>Hostname</th>
                            <th>Location</th>
                            <th>Last Tested</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .ProtocolNodes}}
                        <tr>
                            <td>
                                <a href="/node/{{.Zone}}/{{.Net}}/{{.Node}}" class="node-link">
                                    <strong>{{.Zone}}:{{.Net}}/{{.Node}}</strong>
                                </a>
                            </td>
                            <td>
                                {{if .Hostname}}
                                    <span class="badge badge-info">{{.Hostname}}</span>
                                {{else}}
                                    <span class="text-muted">N/A</span>
                                {{end}}
                            </td>
                            <td>
                                {{if .City}}
                                    {{.City}}, {{.CountryCode}}
                                    {{if .ISP}}
                                        <br><small class="text-muted">{{.ISP}}</small>
                                    {{end}}
                                {{else if .Country}}
                                    {{.Country}}
                                {{else}}
                                    <span class="text-muted">Unknown</span>
                                {{end}}
                            </td>
                            <td>
                                <span class="text-muted">{{.TestTime.Format "2006-01-02 15:04"}}</span>
                            </td>
                            <td>
                                <a href="/reachability/test?zone={{.Zone}}&net={{.Net}}&node={{.Node}}&time={{.TestTime.Format "2006-01-02T15:04:05"}}" class="btn btn-sm btn-info" title="View test details">
                                    Details
                                </a>
                            </td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
            </div>

            <div class="info-box" style="margin-top: 2rem;">
                <p><strong>Note:</strong> This report shows nodes that have been successfully tested with Telnet protocol over the last {{.Days}} days. Telnet access typically indicates a BBS (Bulletin Board System) is running on the node.</p>
            </div>
            {{else}}
            <div class="alert alert-warning">
                <strong>No Telnet enabled nodes found for the selected period.</strong><br>
                This could mean that either no nodes with Telnet/BBS support were tested during this period, or none of them responded successfully to protocol tests.
            </div>
            {{end}}
        </div>
    </div>

    {{template "footer" .}}
</body>
</html>